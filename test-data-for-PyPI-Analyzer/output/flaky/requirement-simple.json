{
  "name": "flaky",
  "description": "flaky\n=====\n\n.. image:: http://opensource.box.com/badges/stable.svg\n    :target: http://opensource.box.com/badges\n\n.. image:: https://travis-ci.org/box/flaky.svg?branch=master\n    :target: https://travis-ci.org/box/flaky\n\n.. image:: https://img.shields.io/pypi/v/flaky.svg\n    :target: https://pypi.python.org/pypi/flaky\n\nAbout\n-----\n\nFlaky is a plugin for nose or pytest that automatically reruns flaky tests.\n\nIdeally, tests reliably pass or fail, but sometimes test fixtures must rely on components that aren't 100%\nreliable. With flaky, instead of removing those tests or marking them to @skip, they can be automatically\nretried.\n\nFor more information about flaky, see `this presentation <http://opensource.box.com/flaky/>`_.\n\nMarking tests flaky\n~~~~~~~~~~~~~~~~~~~\n\nTo mark a test as flaky, simply import flaky and decorate the test with @flaky:\n\n.. code-block:: python\n\n    from flaky import flaky\n\n.. code-block:: python\n\n    @flaky\n    def test_something_that_usually_passes(self):\n        value_to_double = 21\n        result = get_result_from_flaky_doubler(value_to_double)\n        self.assertEqual(result, value_to_double * 2, 'Result doubled incorrectly.')\n\nBy default, flaky will retry a failing test once, but that behavior can be overridden by passing values to the\nflaky decorator. It accepts two parameters: max_runs, and min_passes; flaky will run tests up to max_runs times, until\nit has succeeded min_passes times. Once a test passes min_passes times, it's considered a success; once it has been\nrun max_runs times without passing min_passes times, it's considered a failure.\n\n.. code-block:: python\n\n    @flaky(max_runs=3, min_passes=2)\n    def test_something_that_usually_passes(self):\n        \"\"\"This test must pass twice, and it can be run up to three times.\"\"\"\n        value_to_double = 21\n        result = get_result_from_flaky_doubler(value_to_double)\n        self.assertEqual(result, value_to_double * 2, 'Result doubled incorrectly.')\n\nMarking a class flaky\n+++++++++++++++++++++\n\nIn addition to marking a single test flaky, entire test cases can be marked flaky:\n\n.. code-block:: python\n\n    @flaky\n    class TestMultipliers(TestCase):\n        def test_flaky_doubler(self):\n            value_to_double = 21\n            result = get_result_from_flaky_doubler(value_to_double)\n            self.assertEqual(result, value_to_double * 2, 'Result doubled incorrectly.')\n\n        @flaky(max_runs=3)\n        def test_flaky_tripler(self):\n            value_to_triple = 14\n            result = get_result_from_flaky_tripler(value_to_triple)\n            self.assertEqual(result, value_to_triple * 3, 'Result tripled incorrectly.')\n\nThe @flaky class decorator will mark test_flaky_doubler as flaky, but it won't override the 3 max_runs\nfor test_flaky_tripler (from the decorator on that test method).\n\nPytest marker\n+++++++++++++\n\nWhen using ``pytest``, ``@pytest.mark.flaky`` can be used in place of ``@flaky``.\n\nDon't rerun certain types of failures\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n\nDepending on your tests, some failures are obviously not due to flakiness. Instead of rerunning\nafter those failures, you can specify a filter function that can tell flaky to fail the test right away.\n\n.. code-block:: python\n\n    def is_not_crash(err, *args):\n        return not issubclass(err[0], ProductCrashedError)\n\n    @flaky\n    def test_something():\n        raise ProductCrashedError\n\n    @flaky(rerun_filter=is_not_crash)\n    def test_something_else():\n        raise ProductCrashedError\n\nFlaky will run ``test_something`` twice, but will only run ``test_something_else`` once.\n\nIt can also be used to incur a delay between test retries:\n\n.. code-block:: python\n\n    import time\n\n    def delay_rerun(*args):\n        time.sleep(1)\n        return True\n\n    @flaky(rerun_filter=delay_rerun)\n    def test_something_else():\n        ...\n\nActivating the plugin\n~~~~~~~~~~~~~~~~~~~~~\n\nLike any nose plugin, flaky can be activated via the command line:\n\n.. code-block:: console\n\n    nosetests --with-flaky\n\nWith pytest, flaky will automatically run. It can, however be disabled via the command line:\n\n.. code-block:: console\n\n    pytest -p no:flaky\n\nCommand line arguments\n~~~~~~~~~~~~~~~~~~~~~~\n\nNo Flaky Report\n+++++++++++++++\n\nPass ``--no-flaky-report`` to suppress the report at the end of the run detailing flaky test results.\n\nShorter Flaky Report\n++++++++++++++++++++\n\nPass ``--no-success-flaky-report`` to suppress information about successful flaky tests.\n\nForce Flaky\n+++++++++++\n\nPass ``--force-flaky`` to treat all tests as flaky.\n\nPass ``--max-runs=MAX_RUNS`` and/or ``--min-passes=MIN_PASSES`` to control the behavior of flaky if ``--force-flaky``\nis specified. Flaky decorators on individual tests will override these defaults.\n\n\n*Additional usage examples are in the code - see test/test_nose/test_nose_example.py and test/test_pytest/test_pytest_example.py*\n\nInstallation\n------------\n\nTo install, simply:\n\n.. code-block:: console\n\n    pip install flaky\n\n\nCompatibility\n-------------\n\nFlaky is tested with the following test runners and options:\n\n- Nosetests. Doctests cannot be marked flaky.\n\n- Py.test. Works with ``pytest-xdist`` but not with the ``--boxed`` option. Doctests cannot be marked flaky.\n\n\nContributing\n------------\n\nSee `CONTRIBUTING.rst <https://github.com/box/flaky/blob/master/CONTRIBUTING.rst>`_.\n\n\nSetup\n~~~~~\n\nCreate a virtual environment and install packages -\n\n.. code-block:: console\n\n    mkvirtualenv flaky\n    pip install -r requirements-dev.txt\n\n\nTesting\n~~~~~~~\n\nRun all tests using -\n\n.. code-block:: console\n\n    tox\n\nThe tox tests include code style checks via pycodestyle and pylint.\n\n\nCopyright and License\n---------------------\n\n::\n\n Copyright 2015 Box, Inc. All rights reserved.\n\n Licensed under the Apache License, Version 2.0 (the \"License\");\n you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an \"AS IS\" BASIS,\n WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n See the License for the specific language governing permissions and\n limitations under the License.\n\n\n",
  "requires_dist": null,
  "requires_python": ">=2.7, !=3.0.*, !=3.1.*, !=3.2.*, !=3.3.*",
  "current_version": "3.7.0",
  "released_versions": [
    "0.0.1",
    "0.0.2",
    "0.0.3",
    "0.0.4",
    "0.2.0",
    "0.3.0",
    "0.4.0",
    "1.0.0",
    "1.0.1",
    "1.0.2",
    "1.1.0",
    "2.0.0",
    "2.0.3",
    "2.0.4",
    "2.1.0",
    "2.1.1",
    "2.1.2",
    "2.2.0",
    "2.4.0",
    "2.4.1",
    "3.0.0",
    "3.0.1",
    "3.0.2",
    "3.0.3",
    "3.1.0",
    "3.1.1",
    "3.2.0",
    "3.3.0",
    "3.4.0",
    "3.5.0",
    "3.5.1",
    "3.5.2",
    "3.5.3",
    "3.6.0",
    "3.6.1",
    "3.7.0"
  ]
}