{
  "name": "persistent",
  "description": "===========================================================\n ``persistent``:  automatic persistence for Python objects\n===========================================================\n\n.. image:: https://github.com/zopefoundation/persistent/actions/workflows/tests.yml/badge.svg\n        :target: https://github.com/zopefoundation/persistent/actions/workflows/tests.yml\n\n.. image:: https://coveralls.io/repos/github/zopefoundation/persistent/badge.svg?branch=master\n        :target: https://coveralls.io/github/zopefoundation/persistent?branch=master\n\n.. image:: https://readthedocs.org/projects/persistent/badge/?version=latest\n        :target: http://persistent.readthedocs.org/en/latest/\n        :alt: Documentation Status\n\n.. image:: https://img.shields.io/pypi/v/persistent.svg\n        :target: https://pypi.org/project/persistent\n        :alt: Latest release\n\n.. image:: https://img.shields.io/pypi/pyversions/persistent.svg\n        :target: https://pypi.org/project/persistent\n        :alt: Python versions\n\nThis package contains a generic persistence implementation for Python. It\nforms the core protocol for making objects interact \"transparently\" with\na database such as the ZODB.\n\nPlease see the Sphinx documentation (``docs/index.rst``) for further\ninformation, or view the documentation at Read The Docs, for either\nthe latest (``http://persistent.readthedocs.io/en/latest/``) or stable\nrelease (``http://persistent.readthedocs.io/en/stable/``).\n\n.. note::\n\n   Use of this standalone ``persistent`` release is not recommended or\n   supported with ZODB < 3.11.  ZODB 3.10 and earlier bundle their own\n   version of  the ``persistent`` package.\n\n\n==========================\n ``persistent`` Changelog\n==========================\n\n4.7.0 (2021-04-13)\n==================\n\n- Add support for Python 3.9.\n- Move from Travis CI to Github Actions.\n- Supply manylinux wheels for aarch64 (ARM).\n- Fix the pure-Python implementation to activate a ghost object\n  when setting its ``__class__`` and ``__dict__``. This matches the\n  behaviour of the C implementation. See `issue 155\n  <https://github.com/zopefoundation/persistent/issues/155>`_.\n- Fix the CFFI cache implementation (used on CPython when\n  ``PURE_PYTHON=1``) to not print unraisable ``AttributeErrors`` from\n  ``_WeakValueDictionary`` during garbage collection. See `issue 150\n  <https://github.com/zopefoundation/persistent/issues/150>`_.\n- Make the pure-Python implementation of the cache run a garbage\n  collection (``gc.collect()``) on ``full_sweep``, ``incrgc`` and\n  ``minimize`` *if* it detects that an object that was weakly\n  referenced has been ejected. This solves issues on PyPy with ZODB raising\n  ``ConnectionStateError`` when there are persistent\n  ``zope.interface`` utilities/adapters registered. This partly\n  reverts a change from release 4.2.3.\n\n4.6.4 (2020-03-26)\n==================\n\n- Fix an overly specific test failure using zope.interface 5. See\n  `issue 144 <https://github.com/zopefoundation/persistent/issues/144>`_.\n- Fix two reference leaks that could theoretically occur as the result\n  of obscure errors. See `issue 143 <https://github.com/zopefoundation/persistent/issues/143>`_.\n\n4.6.3 (2020-03-18)\n==================\n\n- Fix a crash in the test suite under a 32-bit CPython on certain\n  32-bit platforms. See `issue 137\n  <https://github.com/zopefoundation/persistent/issues/137>`_. Fix by\n  `Jerry James <https://github.com/jamesjer>`_.\n\n\n4.6.2 (2020-03-12)\n==================\n\n- Fix an ``AssertionError`` clearing a non-empty ``PersistentMapping``\n  that has no connection. See `issue 139\n  <https://github.com/zopefoundation/persistent/issues/139>`_.\n\n\n4.6.1 (2020-03-06)\n==================\n\n- Stop installing C header files on PyPy (which is what persistent before 4.6.0\n  used to do), fixes `issue 135\n  <https://github.com/zopefoundation/persistent/issues/135>`_.\n\n\n4.6.0 (2020-03-05)\n==================\n\n- Fix slicing of ``PersistentList`` to always return instances of the\n  same class. It was broken on Python 3 prior to 3.7.4.\n\n- Fix copying  of ``PersistentList`` and ``PersistentMapping`` using\n  ``copy.copy`` to also copy the underlying data object. This was\n  broken prior to Python 3.7.4.\n\n- Update the handling of the ``PURE_PYTHON`` environment variable.\n  Now, a value of \"0\" requires that the C extensions be used; any other\n  non-empty value prevents the extensions from being used. Also, all C\n  extensions are required together or none of them will be used. This\n  prevents strange errors that arise from a mismatch of Python and C\n  implementations. See `issue 131 <https://github.com/zopefoundation/persistent/issues/131>`_.\n\n  Note that some private implementation details such as the names of\n  the pure-Python implementations have changed.\n\n- Fix ``PersistentList`` to mark itself as changed after calling\n  ``clear`` (if needed). See `PR 115\n  <https://github.com/zopefoundation/persistent/pull/115/>`_.\n\n- Fix ``PersistentMapping.update`` to accept keyword arguments like\n  the native ``UserDict``. Previously, most uses of keyword arguments\n  resulted in ``TypeError``; in the undocumented and extremely\n  unlikely event of a single keyword argument called ``b`` that\n  happens to be a dictionary, the behaviour will change. Also adjust\n  the signatures of ``setdefault`` and ``pop`` to match the native\n  version.\n\n- Fix ``PersistentList.clear``, ``PersistentMapping.clear`` and\n  ``PersistentMapping.popitem`` to no longer mark the object as\n  changed if it was empty.\n\n- Add preliminary support for Python 3.9a3+.\n  See `issue 124 <https://github.com/zopefoundation/persistent/issues/124>`_.\n\n- Fix the Python implementation of the PickleCache to be able to store\n  objects that cannot be weakly referenced. See `issue 133\n  <https://github.com/zopefoundation/persistent/issues/133>`_.\n\n  Note that ``ctypes`` is required to use the Python implementation\n  (except on PyPy).\n\n4.5.1 (2019-11-06)\n==================\n\n- Add support for Python 3.8.\n\n- Update documentation to Python 3.\n\n\n4.5.0 (2019-05-09)\n==================\n\n- Fully test the C implementation of the PickleCache, and fix\n  discrepancies between it and the Python implementation:\n\n  - The C implementation now raises ``ValueError`` instead of\n    ``AssertionError`` for certain types of bad inputs.\n  - The Python implementation uses the C wording for error messages.\n  - The C implementation properly implements ``IPickleCache``; methods\n    unique to the Python implementation were moved to\n    ``IExtendedPickleCache``.\n  - The Python implementation raises ``AttributeError`` if a\n    persistent class doesn't have a ``p_jar`` attribute.\n\n  See `issue 102\n  <https://github.com/zopefoundation/persistent/issues/102>`_.\n\n- Allow sweeping cache without ``cache_size``. ``cache_size_bytes``\n  works with ``cache_size=0``, no need to set ``cache_size`` to a\n  large value.\n\n- Require ``CFFI`` on CPython for pure-Python operation. This drops\n  support for Jython (which was untested). See `issue 77\n  <https://github.com/zopefoundation/persistent/issues/77>`_.\n\n- Fix DeprecationWarning about ``PY_SSIZE_T_CLEAN``.\n  See `issue 108 <https://github.com/zopefoundation/persistent/issues/108>`_.\n\n- Drop support for Python 3.4.\n\n\n4.4.3 (2018-10-22)\n==================\n\n- Fix the repr of the persistent objects to include the module name\n  when using the C extension. This matches the pure-Python behaviour\n  and the behaviour prior to 4.4.0. See `issue 92\n  <https://github.com/zopefoundation/persistent/issues/92>`_.\n\n- Change the repr of persistent objects to format the OID as in\n  integer in hexadecimal notation if it is an 8-byte byte string, as\n  ZODB does. This eliminates some issues in doctests. See `issue 95\n  <https://github.com/zopefoundation/persistent/pull/95>`_.\n\n\n4.4.2 (2018-08-28)\n==================\n\n- Explicitly use unsigned constants for packing and unpacking C\n  timestamps, fixing an arithmetic issue for GCC when optimizations\n  are enabled and ``-fwrapv`` is *not* enabled. See `issue 86\n  <https://github.com/zopefoundation/persistent/issues/86>`_.\n\n\n4.4.1 (2018-08-23)\n==================\n\n- Fix installation of source packages on PyPy. See `issue 88\n  <https://github.com/zopefoundation/persistent/issues/88>`_.\n\n\n4.4.0 (2018-08-22)\n==================\n\n- Use unsigned constants when doing arithmetic on C timestamps,\n  possibly avoiding some overflow issues with some compilers or\n  compiler settings. See `issue 86\n  <https://github.com/zopefoundation/persistent/issues/86>`_.\n\n- Change the default representation of ``Persistent`` objects to\n  include the representation of their OID and jar, if set. Also add\n  the ability for subclasses to implement ``_p_repr()`` instead of\n  overriding ``__repr__`` for better exception handling. See `issue 11\n  <https://github.com/zopefoundation/persistent/issues/11>`_.\n\n- Reach and maintain 100% test coverage.\n\n- Simplify ``__init__.py``, including removal of an attempted legacy\n  import of ``persistent.TimeStamp``. See `PR 80\n  <https://github.com/zopefoundation/persistent/pull/80>`_.\n\n- Add support for Python 3.7 and drop support for Python 3.3.\n\n- Build the CFFI modules (used on PyPy or when PURE_PYTHON is set) `at\n  installation or wheel building time\n  <https://cffi.readthedocs.io/en/latest/cdef.html#ffibuilder-set-source-preparing-out-of-line-modules>`_\n  when CFFI is available. This replaces `the deprecated way\n  <https://cffi.readthedocs.io/en/latest/overview.html#abi-versus-api>`_\n  of building them at import time. If binary wheels are distributed,\n  it eliminates the need to have a functioning C compiler to use PyPy.\n  See `issue 75\n  <https://github.com/zopefoundation/persistent/issues/75>`_.\n\n- Fix deleting the ``_p_oid`` of a pure-Python persistent object when\n  it is in a cache.\n\n- Fix deleting special (``_p``) attributes of a pure-Python persistent\n  object that overrides ``__delattr__`` and correctly calls ``_p_delattr``.\n\n- Remove some internal compatibility shims that are no longer\n  necessary. See `PR 82 <https://github.com/zopefoundation/persistent/pull/82>`_.\n\n- Make the return value of ``TimeStamp.second()`` consistent across C\n  and Python implementations when the ``TimeStamp`` was created from 6\n  arguments with floating point seconds. Also make it match across\n  trips through ``TimeStamp.raw()``. Previously, the C version could\n  initially have erroneous rounding and too much false precision,\n  while the Python version could have too much precision. The raw/repr\n  values have not changed. See `issue 41\n  <https://github.com/zopefoundation/persistent/issues/41>`_.\n\n\n4.3.0 (2018-07-30)\n==================\n\n- Fix the possibility of a rare crash in the C extension when\n  deallocating items. See https://github.com/zopefoundation/persistent/issues/66\n\n- Change cPickleCache's comparison of object sizes to determine\n  whether an object can go in the cache to use ``PyObject_TypeCheck()``.\n  This matches what the pure Python implementation does and is a\n  stronger test that the object really is compatible with the cache.\n  Previously, an object could potentially include ``cPersistent_HEAD``\n  and *not* set ``tp_base`` to ``cPersistenceCAPI->pertype`` and still\n  be eligible for the pickle cache; that is no longer the case. See\n  `issue 69 <https://github.com/zopefoundation/persistent/issues/69>`_.\n\n\n4.2.4.2 (2017-04-23)\n====================\n\n- Packaging-only release: fix Python 2.7 ``manylinux`` wheels.\n\n\n4.2.4.1 (2017-04-21)\n====================\n\n- Packaging-only release:  get ``manylinux`` wheel built automatically.\n\n\n4.2.4 (2017-03-20)\n==================\n\n- Avoid raising a ``SystemError: error return without exception set``\n  when loading an object with slots whose jar generates an exception\n  (such as a ZODB ``POSKeyError``) in ``setstate``.\n\n\n4.2.3 (2017-03-08)\n==================\n\n- Fix the hashcode of Python ``TimeStamp`` objects on 64-bit Python on\n  Windows. See https://github.com/zopefoundation/persistent/pull/55\n\n- Stop calling ``gc.collect`` every time ``PickleCache.incrgc`` is called (every\n  transaction boundary) in pure-Python mode (PyPy). This means that\n  the reported size of the cache may be wrong (until the next GC), but\n  it is much faster. This should not have any observable effects for\n  user code.\n\n- Stop clearing the dict and slots of objects added to\n  ``PickleCache.new_ghost`` (typically these values are passed to\n  ``__new__`` from the pickle data) in pure-Python mode (PyPy). This\n  matches the behaviour of the C code.\n\n- Add support for Python 3.6.\n\n- Fix ``__setstate__`` interning when ``state`` parameter is not a built-in dict\n\n\n4.2.2 (2016-11-29)\n==================\n\n- Drop use of ``ctypes`` for determining maximum integer size, to increase\n  pure-Python compatibility. See https://github.com/zopefoundation/persistent/pull/31\n\n- Ensure that ``__slots__`` attributes are cleared when a persistent\n  object is ghostified.  (This excluses classes that override\n  ``__new__``.  See\n  https://github.com/zopefoundation/persistent/wiki/Notes_on_state_new_and_slots\n  if you're curious.)\n\n\n4.2.1 (2016-05-26)\n==================\n\n- Fix the hashcode of C ``TimeStamp`` objects on 64-bit Python 3 on\n  Windows.\n\n\n4.2.0 (2016-05-05)\n==================\n\n- Fixed the Python(/PYPY) implementation ``TimeStamp.timeTime`` method\n  to have subsecond precision.\n\n- When testing ``PURE_PYTHON`` environments under ``tox``, avoid poisoning\n  the user's global wheel cache.\n\n- Add support for Python 3.5.\n\n- Drop support for Python 2.6 and 3.2.\n\n\n4.1.1 (2015-06-02)\n==================\n\n- Fix manifest and re-upload to fix stray files included in 4.1.0.\n\n\n4.1.0 (2015-05-19)\n==================\n\n- Make the Python implementation of ``Persistent`` and ``PickleCache``\n  behave more similarly to the C implementation. In particular, the\n  Python version can now run the complete ZODB and ZEO test suites.\n\n- Fix the hashcode of the Python ``TimeStamp`` on 32-bit platforms.\n\n\n4.0.9 (2015-04-08)\n==================\n\n- Make the C and Python ``TimeStamp`` objects behave more alike. The\n  Python version now produces the same ``repr`` and ``.raw()`` output as\n  the C version, and has the same hashcode. In addition, the Python\n  version is now supports ordering and equality like the C version.\n\n- Intern keys of object state in ``__setstate__`` to reduce memory usage\n  when unpickling multiple objects with the same attributes.\n\n- Add support for PyPy3.\n\n- 100% branch coverage.\n\n\n4.0.8 (2014-03-20)\n==================\n\n- Add support for Python 3.4.\n\n- In pure-Python ``Persistent``, avoid loading state in ``_p_activate``\n  for non-ghost objects (which could corrupt their state).  (PR #9)\n\n- In pure-Python, and don't throw ``POSKeyError`` if ``_p_activate`` is\n  called on an object that has never been committed.  (PR #9)\n\n- In pure-Python ``Persistent``, avoid calling a subclass's ``__setattr__``\n  at instance creation time. (PR #8)\n\n- Make it possible to delete ``_p_jar`` / ``_p_oid`` of a pure-Python\n  ``Persistent`` object which has been removed from the jar's cache\n  (fixes aborting a ZODB Connection that has added objects). (PR #7)\n\n\n4.0.7 (2014-02-20)\n==================\n\n- Avoid a KeyError from ``_p_accessed()`` on newly-created objects under\n  pure-Python:  these objects may be assigned to a jar, but not yet added\n  to its cache.  (PR #6)\n\n- Avoid a failure in ``Persistent.__setstate__`` when the state dict\n  contains exactly two keys.  (PR #5)\n\n- Fix a hang in ``picklecache`` invalidation if OIDs are manually passed\n  out-of-order. (PR #4)\n\n- Add ``PURE_PYTHON`` environment variable support:  if set, the C\n  extensions will not be built, imported, or tested.\n\n\n4.0.6 (2013-01-03)\n==================\n\n- Updated Trove classifiers.\n\n\n4.0.5 (2012-12-14)\n==================\n\n- Fixed the C-extensions under Py3k (previously they compiled but were\n  not importable).\n\n\n4.0.4 (2012-12-11)\n==================\n\n- Added support for Python 3.3.\n\n- C extenstions now build under Python 3.2, passing the same tests as\n  the pure-Python reference implementation.\n\n\n4.0.3 (2012-11-19)\n==================\n\n- Fixed: In the C implimentation, an integer was compared with a\n  pointer, with undefined results and a compiler warning.\n\n- Fixed: the Python implementation of the ``_p_estimated_size`` propety\n  didn't support deletion.\n\n- Simplified implementation of the ``_p_estimated_size`` property to\n  only accept integers.  A TypeError is raised if an incorrect type is\n  provided.\n\n\n4.0.2 (2012-08-27)\n==================\n\n- Correct initialization functions in renamed ``_timestamp`` extension.\n\n\n4.0.1 (2012-08-26)\n==================\n\n- Worked around test failure due to overflow to long on 32-bit systems.\n\n- Renamed ``TimeStamp`` extension module to avoid clash with pure-Python\n  ``timestamp`` module on case-insensitive filesystems.\n\n  N.B:  the canonical way to import the ``TimeStamp`` class is now::\n\n    from persistent.timestamp import TimeStamp\n\n  which will yield the class from the extension module (if available),\n  falling back to the pure-Python reference implementation.\n\n\n4.0.0 (2012-08-11)\n==================\n\nPlatform Changes\n----------------\n\n- Added explicit support for Python 3.2 and PyPy.\n\n  - Note that the C implementations of Persistent, PickleCache, and Timestamp\n    are not built (yet) on these platforms.\n\n- Dropped support for Python < 2.6.\n\nTesting Changes\n---------------\n\n- 100% unit test coverage.\n\n- Removed all ``ZODB``-dependent tests:\n\n  - Rewrote some to avoid the dependency\n\n  - Cloned the remainder into new ``ZODB.tests`` modules.\n\n- Refactored some doctests refactored as unittests.\n\n- Completed pure-Python reference implementations of 'Persistent',\n  'PickleCache', and 'TimeStamp'.\n\n- All covered platforms tested under ``tox``.\n\n- Added support for continuous integration using ``tox`` and ``jenkins``.\n\n- Added ``setup.py dev`` alias (installs ``nose`` and ``coverage``).\n\n- Dropped dependency on ``zope.testing`` / ``zope.testrunner``:  tests now\n  run with ``setup.py test``.\n\nDocumentation Changes\n---------------------\n\n- Refactored many Doctests as Sphinx documentation (snippets are exercised\n  via 'tox').\n\n- Added ``setup.py docs`` alias (installs ``Sphinx`` and\n  ``repoze.sphinx.autointerface``).",
  "requires_dist": null,
  "requires_python": "",
  "current_version": "4.7.0",
  "released_versions": [
    "4.0.0",
    "4.0.1",
    "4.0.2",
    "4.0.3",
    "4.0.4",
    "4.0.5",
    "4.0.6",
    "4.0.7",
    "4.0.8",
    "4.0.9",
    "4.1.0",
    "4.1.1",
    "4.2.0",
    "4.2.1",
    "4.2.2",
    "4.2.3",
    "4.2.4",
    "4.2.4.1",
    "4.2.4.2",
    "4.3.0",
    "4.4.0",
    "4.4.1",
    "4.4.2",
    "4.4.3",
    "4.5.0",
    "4.5.1",
    "4.6.0",
    "4.6.1",
    "4.6.2",
    "4.6.3",
    "4.6.4",
    "4.7.0"
  ]
}