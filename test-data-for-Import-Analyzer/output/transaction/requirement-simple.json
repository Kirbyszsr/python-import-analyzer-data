{
  "name": "transaction",
  "description": "============\nTransactions\n============\n\n.. image:: https://travis-ci.com/zopefoundation/transaction.svg?branch=master\n        :target: https://travis-ci.com/zopefoundation/transaction\n\n.. image:: https://readthedocs.org/projects/transaction/badge/?version=latest\n        :target: http://transaction.readthedocs.org/en/latest/\n        :alt: Documentation Status\n\n.. image:: https://img.shields.io/pypi/v/transaction.svg\n        :target: https://pypi.python.org/pypi/transaction\n        :alt: PyPI\n\n.. image:: https://img.shields.io/pypi/pyversions/transaction.svg\n        :target: https://pypi.python.org/pypi/transaction\n        :alt: Python versions\n\nThis package contains a generic transaction implementation for Python. It is\nmainly used by the ZODB.\n\nSee http://transaction.readthedocs.org/en/latest for narrative documentation\non its usage.\n\n\n\n=========\n Changes\n=========\n\n3.0.1 (2020-12-11)\n==================\n\n- Exception raised by a before commit hook is no longer hidden.  No\n  further commit hooks are called and exception is propagated to\n  the caller of ``commit()``. See\n  `#95 <https://github.com/zopefoundation/transaction/pull/95>`_.\n\n\n3.0.0 (2019-12-11)\n==================\n\n- Drop support for Python 3.4.\n\n- Add support for Python 3.8.\n\n- Drop support for legacy transaction APIs including\n  ``Transaction.register()`` and old ZODB3-style datamanagers. See\n  `issue 89\n  <https://github.com/zopefoundation/transaction/issues/89>`_.\n\n- ``TransactionManager.run`` now commits/aborts the transaction\n  \"active\" after the execution of *func* (and no longer the initial\n  transaction which might already have been committed/aborted by *func*)\n  (`#58 <https://github.com/zopefoundation/transaction/issues/58>`_).\n\n  It aborts the transaction now for all exceptions raised by *func* - even\n  if it is only an instance of `BaseException` but not of `Exception`,\n  such as e.g. a ``SystemExit`` or ``KeyboardInterupt`` exception.\n\n- Support abort hooks (symmetrically to commit hooks)\n  (`#77 <https://github.com/zopefoundation/transaction/issues/77>`_).\n\n- Make Transaction drop references to its hooks, manager,\n  synchronizers and data after a successful ``commit()`` and after\n  *any* ``abort()``. This helps avoid potential cyclic references. See\n  `issue 82 <https://github.com/zopefoundation/transaction/issues/82>`_.\n\n- Allow synchronizers to access ``Transaction.data()`` when their\n  ``afterCompletion`` method is called while aborting a transaction.\n\n- Make it safe to call ``Transaction.abort()`` more than once. The\n  second and subsequent calls are no-ops. Previously a\n  ``ValueError(Foreign transaction)`` would be raised.\n\n2.4.0 (2018-10-23)\n==================\n\n- Changed the implementation of ThreadTransactionManager to be a\n  thread.local that wraps a TransactionManager rather than a\n  thread.local that inherits from TransactionManager. It now exposes a\n  manager attribute that allows access to the wrapped transaction\n  manager to allow cross thread calls. See `issue 68\n  <https://github.com/zopefoundation/transaction/pull/68>`_.\n\n\n2.3.0 (2018-10-19)\n==================\n\n- Add support for Python 3.7.\n\n- Reach 100% test coverage.\n\n- Fix ``transaction.manager.run`` formatting transaction notes when\n  given a mix of byte and text strings, such as can happen in Python 2\n  with ``unicode_literals``.\n\n2.2.1 (2018-03-27)\n==================\n\n- Make documentation index more user friendly; move old docs to developer\n  section.\n\n- Don't crash when printing tracebacks in IPython on Python 2.\n  (This addresses https://github.com/zopefoundation/transaction/issues/5.)\n\n\n2.2.0 (2018-02-27)\n==================\n\n- Add support for Python 3.6.\n\n- Drop support for Python 3.3.\n\n- Add ``isRetryableError`` to the\n  ``transaction.interfaces.ITransaction`` interface to allow external\n  systems to query whether an exception is retryable (transient) by\n  any of the attached data managers. Any\n  ``transaction.interfaces.TransientError`` is considered retryable\n  but a data manager may also consider other exceptions on a\n  per-instance basis.\n\n  See https://github.com/zopefoundation/transaction/pull/38\n\n\n2.1.2 (2017-03-11)\n==================\n\n- To avoid leaking memory, don't include unexpected value in warnings\n  about non-text transaction meta data.\n\n\n2.1.1 (2017-03-11)\n==================\n\n- For backward compatibility, relax the requirements that transaction\n  meta data (user or description) be text:\n\n  - If None is assigned, the assignment is ignored.\n\n  - If a non-text value is assigned, a warning is issued and the value\n    is converted to text. If the value is a binary string, it will be\n    decoded with the UTF-8 encoding the ``replace`` error policy.\n\n\n2.1.0 (2017-02-08)\n==================\n\nAdded a transaction-manager explicit mode. Explicit mode makes some\nkinds of application bugs easier to detect and potentially allows data\nmanagers to manage resources more efficiently.\n\n(This addresses https://github.com/zopefoundation/transaction/issues/35.)\n\n2.0.3 (2016-11-17)\n==================\n\n- The user and description fields must now be set with text (unicode)\n  data.  Previously, if bytes were provided, they'd be decoded as\n  ASCII.  It was decided that this would lead to bugs that were hard\n  to test for.\n\n  Also, the transaction meta-data field, ``extended_info`` has been\n  renamed to ``extension``.\n\n2.0.2 (2016-11-13)\n==================\n\n- Fixed: Some legacy applications expect the transaction _extension\n  attribute to be mutable and it wasn't.\n\n2.0.1 (2016-11-11)\n==================\n\n- The transaction ``user`` and ``description`` attributes are now\n  defined to be text (unicode) as opposed to Python the ``str`` type.\n\n- Added the ``extended_info`` transaction attribute which contains\n  transaction meta data.  (The ``_extension`` attribute is retained as\n  an alias for backward compatibility.)\n\n  The transaction interface, ``ITransaction``, now requires\n  ``extended_info`` keys to be text (unicode) and values to be\n  JSON-serializable.\n\n- Removed setUser from ITransaction.  We'll keep the method\n  indefinitely, but it's unseemly in ITransaction. :)\n\nThe main purpose of these changes is to tighten up the text\nspecification of user, description and extended_info keys, and to give\nus more flexibility in the future for serializing extended info.  It's\npossible that these changes will be breaking, so we're also increasing\nthe major version number.\n\n1.7.0 (2016-11-08)\n==================\n\n- Added a transaction-manager ``run`` method for running a function as a\n  transaction, retrying as necessary on transient errors.\n\n- Fixed the transaction manager ``attempts`` method. It didn't stop\n  repeating when there wasn't an error.\n\n- Corrected ITransaction by removing beforeCommitHook (which is no longer\n  implemented) and removing 'self' from two methods.\n\n1.6.1 (2016-06-10)\n==================\n\n- Fixed: Synchonizers that registered with transaction managers when\n  transactions were in progress didn't have their newTransaction\n  methods called to let them know of the in-progress transactions.\n\n1.6.0 (2016-05-21)\n==================\n\n- New transaction API for storing data on behalf of objects, such as\n  data managers.\n\n- Drop references to data managers joined to a transaction when it is\n  committed or aborted.\n\n1.5.0 (2016-05-05)\n==================\n\n- Drop support for Python 2.6 and 3.2.\n\n- Add support for Python 3.5.\n\n- Added APIs for interogating and clearing internal state to support\n  client tests.\n\n1.4.4 (2015-05-19)\n==================\n\n- Use the standard ``valuerefs()`` method rather than relying on\n  implementation details of ``WeakValueDictionary`` in ``WeakSet``.\n\n- Add support for PyPy3.\n\n- Require 100% branch coverage (in addition to 100% statement coverage).\n\n1.4.3 (2014-03-20)\n==================\n\n- Add support for Python 3.4.\n\n1.4.2 (skipped)\n===============\n\n- Released in error as 1.4.3.\n\n1.4.1 (2013-02-20)\n==================\n\n- Document that values returned by ``sortKey`` must be strings, in order\n  to guarantee total ordering.\n\n- Fix occasional RuntimeError: dictionary changed size during iteration errors\n  in transaction.weakset on Python 3.\n\n1.4.0 (2013-01-03)\n==================\n\n- Updated Trove classifiers.\n\n1.4.0b1 (2012-12-18)\n====================\n\n- Converted existing doctests into Sphinx documentation (snippets are\n  exercised via 'tox').\n\n- 100% unit test coverage.\n\n- Backward incompatibility:   raise ValueError rather than AssertionError\n  for runtime errors:\n\n  - In ``Transaction.doom`` if the transaction is in a non-doomable state.\n\n  - In ``TransactionManager.attempts`` if passed a non-positive value.\n\n  - In ``TransactionManager.free`` if passed a foreign transaction.\n\n- Declared support for Python 3.3 in ``setup.py``, and added ``tox`` testing.\n\n- When a non-retryable exception was raised as the result of a call to\n  ``transaction.manager.commit`` within the \"attempts\" machinery, the\n  exception was not reraised properly.  Symptom: an unrecoverable exception\n  such as ``Unsupported: Storing blobs in <somestorage> is not supported.``\n  would be swallowed inappropriately.\n\n1.3.0 (2012-05-16)\n==================\n\n- Added Sphinx API docuementation.\n\n- Added explicit support for PyPy.\n\n- Dropped use of Python3-impatible ``zope.interface.implements`` class\n  advisor in favor of ``zope.interface.implementer`` class decorator.\n\n- Added support for continuous integration using ``tox`` and ``jenkins``.\n\n- Added ``setup.py docs`` alias (installs ``Sphinx`` and dependencies).\n\n- Added ``setup.py dev`` alias (runs ``setup.py develop`` plus installs\n  ``nose`` and ``coverage``).\n\n- Python 3.3 compatibility.\n\n- Fix \"for attempt in transaction.attempts(x)\" machinery, which would not\n  retry a transaction if its implicit call to ``.commit()`` itself raised a\n  transient error.  Symptom: seeing conflict errors even though you thought\n  you were retrying some number of times via the \"attempts\" machinery (the\n  first attempt to generate an exception during commit would cause that\n  exception to be raised).\n\n1.2.0 (2011-12-05)\n==================\n\nNew Features:\n\n- Python 3.2 compatibility.\n\n- Dropped Python 2.4 and 2.5 compatibility (use 1.1.1 if you need to use\n  \"transaction\" under these Python versions).\n\n1.1.1 (2010-09-16)\n==================\n\nBug Fixes:\n\n- Code in ``_transaction.py`` held on to local references to traceback\n  objects after calling ``sys.exc_info()`` to get one, causing\n  potential reference leakages.\n\n- Fixed ``hexlify`` NameError in ``transaction._transaction.oid_repr``\n  and add test.\n\n1.1.0 (1010-05-12)\n==================\n\nNew Features:\n\n- Transaction managers and the transaction module can be used with the\n  with statement to define transaction boundaries, as in::\n\n     with transaction:\n         ... do some things ...\n\n  See transaction/tests/convenience.txt for more details.\n\n- There is a new iterator function that automates dealing with\n  transient errors (such as ZODB confict errors). For example, in::\n\n     for attempt in transaction.attempts(5):\n         with attempt:\n             ... do some things ..\n\n  If the work being done raises transient errors, the transaction will\n  be retried up to 5 times.\n\n  See transaction/tests/convenience.txt for more details.\n\nBugs fixed:\n\n- Fixed a bug that caused extra commit calls to be made on data\n  managers under certain special circumstances.\n\n  https://mail.zope.org/pipermail/zodb-dev/2010-May/013329.html\n\n- When threads were reused, transaction data could leak accross them,\n  causing subtle application bugs.\n\n  https://bugs.launchpad.net/zodb/+bug/239086\n\n1.0.1 (2010-05-07)\n==================\n\n- LP #142464:  remove double newline between log entries:  it makes doing\n  smarter formatting harder.\n\n- Updated tests to remove use of deprecated ``zope.testing.doctest``.\n\n1.0.0 (2009-07-24)\n==================\n\n- Fix test that incorrectly relied on the order of a list that was generated\n  from a dict.\n\n- Remove crufty DEPENDENCIES.cfg left over from zpkg.\n\n1.0a1 (2007-12-18)\n==================\n\n- Initial release, branched from ZODB trunk on 2007-11-08 (aka\n  \"3.9.0dev\").\n\n- Remove (deprecated) support for beforeCommitHook alias to\n  addBeforeCommitHook.\n\n- Add weakset tests.\n\n- Remove unit tests that depend on ZODB.tests.utils from\n  test_transaction (these are actually integration tests).\n\n\n",
  "requires_dist": [
    "zope.interface",
    "Sphinx ; extra == 'docs'",
    "repoze.sphinx.autointerface ; extra == 'docs'",
    "mock ; extra == 'test'",
    "nose ; extra == 'testing'",
    "coverage ; extra == 'testing'",
    "mock ; extra == 'testing'"
  ],
  "requires_python": "",
  "current_version": "3.0.1",
  "released_versions": [
    "1.0.0",
    "1.0.1",
    "1.0a1",
    "1.1.0",
    "1.1.1",
    "1.2.0",
    "1.3.0",
    "1.4.0",
    "1.4.0b1",
    "1.4.1",
    "1.4.3",
    "1.4.4",
    "1.5.0",
    "1.6.0",
    "1.6.1",
    "1.7.0",
    "2.0.0",
    "2.0.1",
    "2.0.2",
    "2.0.3",
    "2.1.0",
    "2.1.1",
    "2.1.2",
    "2.2.0",
    "2.2.1",
    "2.3.0",
    "2.4.0",
    "3.0.0",
    "3.0.1"
  ]
}